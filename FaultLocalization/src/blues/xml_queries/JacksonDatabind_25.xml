<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="JacksonDatabind_25" link="https://github.com/FasterXML/jackson-databind/issues/890">
<buginformation>
<summary>exception  deserializing  byte  when  the  target  type  comes  from  annotation</summary>
<description>when trying deserialize byte from map when the deserialization type comes from annotation seeing the following exception java lang illegal argument exception can not deserialize class type array bean com fasterxml jackson databind deser bean deserializer factory potential bean type bean deserializer factory java 808 com fasterxml jackson databind deser bean deserializer factory create bean deserializer bean deserializer factory java 138 com fasterxml jackson databind deser deserializer cache create deserializer deserializer cache java 403 com fasterxml jackson databind deser deserializer cache create deserializer deserializer cache java 352 com fasterxml jackson databind deser deserializer cache create and cache deserializer cache java 264 com fasterxml jackson databind deser deserializer cache create and cache value deserializer deserializer cache java 244 com fasterxml jackson databind deser deserializer cache find value deserializer deserializer cache java 142 com fasterxml jackson databind deserialization context find contextual value deserializer deserialization context java 428 com fasterxml jackson databind deser std std deserializer find deserializer std deserializer java 947 com fasterxml jackson databind deser bean deserializer base resolve bean deserializer base java 439 com fasterxml jackson databind deser deserializer cache create and cache deserializer cache java 296 com fasterxml jackson databind deser deserializer cache create and cache value deserializer deserializer cache java 244 com fasterxml jackson databind deser deserializer cache find value deserializer deserializer cache java 142 com fasterxml jackson databind deserialization context find root value deserializer deserialization context java 461 com fasterxml jackson databind object mapper find root deserializer object mapper java 3804 com fasterxml jackson databind object mapper convert object mapper java 3418 com fasterxml jackson databind object mapper convert value object mapper java 3351 the below repro public class jackson test static class foo json property json deserialize byte class object some bytes public void test foo from map map string object map new hash map map put some bytes hello world get bytes object mapper new object mapper convert value map foo class discovered this but tried and exhibiting the same behavior thanks the text was updated successfully but these errors were encountered copy link member cowtowncoder commented aug 2015 interesting suspect this has with the way type overrides are passed and the fact that java type for byte array type looks like can reproduce this without conversion with plain deserialization copy link author gmjabs commented aug 2015 yeah looks like when basic deserializer modify type annotation called for the annotated field updates the field java type simple type object class using narrow but simple type narrow byte class just creates new simple type the subclass this case simple type byte class when should probably returning the appropriate array type cowtowncoder closed this 9917c aug 2015 cowtowncoder added this the milestone aug 2015 copy link member cowtowncoder commented aug 2015 right the problem that java type really has way change itself appropriately but type factory had construct specialized type added some point during which was added basically replace java type narrow not perfect but handles this particular case properly copy link author gmjabs commented aug 2015 thanks for the quick fix copy link member cowtowncoder commented aug 2015 thank you for reporting surprising one had encountered this before fix which was released last night sign for free join this conversation git hub already have account sign comment assignees one assigned labels none yet projects none yet milestone linked pull requests successfully merging pull request may close this issue none yet participants</description>
</buginformation>
<fixedfiles>
<file>com.fasterxml.jackson.databind.deser.BasicDeserializerFactory</file>
<file>com.fasterxml.jackson.databind.deser.DeserializerCache</file>
<file>com.fasterxml.jackson.databind.jsontype.impl.TypeDeserializerBase</file>
<file>com.fasterxml.jackson.databind.module.SimpleAbstractTypeResolver</file>
</fixedfiles>
</bug>
</bugrepository>
