<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="Compress_34" link="https://issues.apache.org/jira/browse/COMPRESS-321">
<buginformation>
<summary>exception  7875 new unix parse from local file data  when  parsing  sized  local  entry</summary>
<description>when  trying  detect  content  type  zip  file  with  tika  which  uses  commons  compress  internally  manner  like  this  byte  content  whole  zip  file  string  name  zip  tika  tika  new  tika  return  tika  detect  content  name  throws  exception  java  lang  arrayindexoutofboundsexception  org  apache  commons  compress  archivers  zip  7875  newunix  parsefromlocalfiledata  7875  newunix  java  199  org  apache  commons  compress  archivers  zip  7875  newunix  parsefromcentraldirectorydata  7875  newunix  java  220  org  apache  commons  compress  archivers  zip  extrafieldutils  parse  extrafieldutils  java  174  org  apache  commons  compress  archivers  zip  ziparchiveentry  setcentraldirectoryextra  ziparchiveentry  java  476  org  apache  commons  compress  archivers  zip  zipfile  readcentraldirectoryentry  zipfile  java  575  org  apache  commons  compress  archivers  zip  zipfile  populatefromcentraldirectory  zipfile  java  492  org  apache  commons  compress  archivers  zip  zipfile  init  zipfile  java  216  org  apache  commons  compress  archivers  zip  zipfile  init  zipfile  java  192  org  apache  commons  compress  archivers  zip  zipfile  init  zipfile  java  153  org  apache  tika  parser  pkg  zipcontainerdetector  detectzipformat  zipcontainerdetector  java  141  org  apache  tika  parser  pkg  zipcontainerdetector  detect  zipcontainerdetector  java  org  apache  tika  detect  compositedetector  detect  compositedetector  java  org  apache  tika  tika  detect  tika  java  155  org  apache  tika  tika  detect  tika  java  183  org  apache  tika  tika  detect  tika  java  223  the  zip  file  does  contain  two  jpg  images  and  not  special  jar  openoffice  zip  file  unfortunately  the  contents  the  zip  file  confidential  and  cannot  attach  this  ticket  although  can  provide  the  parameters  supplied  org  apache  commons  compress  archivers  zip  7875  newunix  parsefromlocalfiledata  7875  newunix  java  199  caught  the  debugger  data  byte  2103  112  108  117  120  offset  length  this  data  comes  from  the  local  zip  entry  for  the  first  file  seems  the  method  tries  read  more  bytes  than  actually  available  the  buffer  seems  that  first  bytes  the  buffer  are  extended  field  with  timestamp  followed  sized  field  bytes  that  supposed  contain  uid  gid  according  infozip  doc  the  size  common  for  global  dictionary  but  the  local  dictionary  should  contain  complete  data  this  case  for  some  reason  does  contain  sized  data  note  that  7zip  and  unzip  can  unzip  the  file  without  even  warning  commons  compress  should  also  able  handle  that  file  correctly  without  choking  that  exception</description>
</buginformation>
<fixedfiles>
<file>org.apache.commons.compress.archivers.zip.X7875_NewUnix</file>
</fixedfiles>
</bug>
</bugrepository>
