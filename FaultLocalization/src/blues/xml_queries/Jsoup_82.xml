<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="Jsoup_82" link="https://github.com/jhy/jsoup/issues/1007">
<buginformation>
<summary>unsupported operation exception  thrown  for  charsets  that  don  support  encoding</summary>
<description>public static void main string args throws exception string html html meta charset iso 2022 html system out println jsoup parse new byte array input stream html get bytes null throws exception thread main java lang unsupported operation exception sun nio ext iso 2022 new encoder iso 2022 java org jsoup nodes document output settings prepare encoder document java 443 org jsoup nodes node outer html visitor node java 704 org jsoup nodes node outer html node java 573 org jsoup nodes element html element java 1395 org jsoup nodes element html element java 1389 org jsoup nodes document outer html document java 195 org jsoup nodes element string element java 1422 java lang string value string java 2982 java print stream println print stream java 821 the text was updated successfully but these errors were encountered copy link owner jhy commented apr 2018 jsoup defaults the output charset whatever the input charset was you don have encoder your system for that charset you can use different one setting the output character set jhy closed this apr 2018 copy link author hans brende commented apr 2018 jhy but some charsets iso 2022 not support encoding all they only support decoding this will fail everyone system this not just problem with system should our responsibility check every page fetch make sure that the output charset also supports encoding not just decoding don think think that certain charset does not support encoding then you should not try use that charset encode the document instead just fall back utf just two cents copy link owner jhy commented apr 2018 that good point and maybe further could look makes sense default the output stream utf always just the input isn supported hitting different sites and don know ahead time their encoding why should the output encoding change need think about how that might impact back compat jhy reopened this apr 2018 copy link contributor cketti commented apr 2018 you change the encoding you probably want remove change document elements specifying the original encoding otherwise the document contents and the actual encoding conflict copy link author hans brende commented apr 2018 edited jhy fyi this error was one few that popped during the course apache tika discussion about migrating from tag soup jsoup may interest you https issues apache org jira browse tika 1599 exceptions contained the attachment tagsoup jsoup reports zip jhy closed this 6be 19a apr 2018 jhy added this the milestone apr 2018 jhy added the improvement label apr 2018 copy link owner jhy commented apr 2018 thanks implemented including updating the meta charset hans brende thanks there more that useful fix please feel free raise them too sign for free join this conversation git hub already have account sign comment assignees one assigned labels improvement projects none yet milestone linked pull requests successfully merging pull request may close this issue none yet participants</description>
</buginformation>
<fixedfiles>
<file>org.jsoup.helper.DataUtil</file>
</fixedfiles>
</bug>
</bugrepository>
