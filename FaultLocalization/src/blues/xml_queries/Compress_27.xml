<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="Compress_27" link="https://issues.apache.org/jira/browse/COMPRESS-278">
<buginformation>
<summary>incorrect  handling  nul  username  and  group  tar  entries</summary>
<description>with  version  commons  compress  longer  possible  decompress  files  from  archive  the  archive  contains  entries  having  null  being  empty  set  username  and  usergroup  with  version  this  still  worked  now  get  this  exception  java  ioexception  error  detected  parsing  the  header  org  apache  commons  compress  archivers  tar  tararchiveinputstream  getnexttarentry  tararchiveinputstream  java  249  testbed  apptest  extractnofileowner  apptest  java  caused  java  lang  illegalargumentexception  invalid  byte  offset  nul  len  org  apache  commons  compress  archivers  tar  tarutils  parseoctal  tarutils  java  134  org  apache  commons  compress  archivers  tar  tarutils  parseoctalorbinary  tarutils  java  173  org  apache  commons  compress  archivers  tar  tararchiveentry  parsetarheader  tararchiveentry  java  953  org  apache  commons  compress  archivers  tar  tararchiveentry  parsetarheader  tararchiveentry  java  940  org  apache  commons  compress  archivers  tar  tararchiveentry  init  tararchiveentry  java  324  org  apache  commons  compress  archivers  tar  tararchiveinputstream  getnexttarentry  tararchiveinputstream  java  247  more  this  exception  leads  suspision  that  the  regression  was  introduced  with  the  fix  for  this  ticket  compress  262  which  has  nearly  identical  exception  provided  some  test  code  you  can  run  verify  package  testbed  import  java  file  import  java  fileinputstream  import  java  filenotfoundexception  import  java  ioexception  import  org  apache  commons  compress  archivers  tar  tararchiveentry  import  org  apache  commons  compress  archivers  tar  tararchiveinputstream  import  org  apache  commons  compress  compressors  gzip  gzipcompressorinputstream  import  org  junit  test  unit  test  for  simple  app  public  class  apptest  test  public  void  extractnofileowner  tararchiveinputstream  tarinputstream  null  try  tarinputstream  new  tararchiveinputstream  new  gzipcompressorinputstream  new  fileinputstream  new  file  home  pknobel  redis  dist  linux  tar  tararchiveentry  entry  while  entry  tarinputstream  getnexttarentry  null  system  out  println  entry  getname  system  out  println  entry  getusername  entry  getgroupname  catch  filenotfoundexception  printstacktrace  catch  ioexception  printstacktrace  with  the  testcase  outputed  this  redis  dist  bin  redis  dist  bin  redis  server  jenkins  jenkins  redis  dist  bin  redis  cli  jenkins  jenkins  with  failing  once  reaches  the  null  valued  entry  which  the  first  the  archive  created  using  maven  assembly  plugin  and  tried  the  same  with  maven  ant  task  both  generating  archive  with  not  set  username  and  groups  for  least  some  entries  you  can  download  the  archive  from  http  heli  darktech  org  redis  redis  dist  linux  tar  you  run  tar  tvzf  the  file  you  see  this  report  drwxr  2014  redis  dist  snapshot  bin  rwxr  pknobel  pknobel  3824588  2014  redis  dist  snapshot  bin  redis  cli  rwxr  pknobel  pknobel  5217234  2014  redis  dist  snapshot  bin  redis  server  the  user  probably  indicates  that  not  set  although  the  root  user  correctly  root  user  file  would  show  root  root</description>
</buginformation>
<fixedfiles>
<file>org.apache.commons.compress.archivers.tar.TarUtils</file>
</fixedfiles>
</bug>
</bugrepository>
