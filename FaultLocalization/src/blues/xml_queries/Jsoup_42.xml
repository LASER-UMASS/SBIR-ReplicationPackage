<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="Jsoup_42" link="https://github.com/jhy/jsoup/issues/489">
<buginformation>
<summary>form element form data  ignores  input  checkbox  checked  without  value</summary>
<description>when there input input type checkbox name test check box checked checked the form data form element ignores that default value which should submitted browsers html fragment html head title test title head body form name form method post input type checkbox name test check box checked checked something input type submit value submit form body html when submiting from firefox sends sever test check box java code public static void main string args final string html html head title test title head body form name form method post input type checkbox name test check box checked checked something input type submit value submit form body html final document document jsoup parse html final form element form element form element document select form name form first for connection key val key val form element form data system out println key val key key val value output test check box expected output test check box seems like jsoup doesn add default value which sent browsers the submit method from form element also uses form data method get form submission parameters sending the empty string for checkbox the server acts not checked when fact was checked also while testing noticed that doesn check the checkbox all there checkbox with value but not checked will get the value matter what for example input type checkbox name text check box value test val this affects radio buttons well not selected radion buttons should not sent server but form data add their values anyway not sure that done purpose but submit method will get wrong parameters for submission since not checked input value not sent server all moreover type button value and disabled inputs are not sent server well browsers looked the source one extra else before the final else form data method could solve this else input equals tag name not disabled ignore disabled inputs has attr disabled deal with checkbox and radio not checked should not added avoid sending server checkbox equals attr type radio equals attr type checked but value default should has attr checked has attr value data add http connection key val create name checked add value else has attr checked data add http connection key val create name val buttons should ignored else button equals attr type data add http connection key val create name val one more thing form has multiple type submit inputs only the clicked input value should sent server but have idea how this could implemented sending all submit input values can change the server logic and bad result not expected the text was updated successfully but these errors were encountered copy link contributor cromoteca commented nov 2014 according mdn the value attribute required when type checkbox radio default value used most all browsers when value missing but there official default was writing some code for this issue but then saw that the form data method seems somewhat incomplete for example the disabled attribute ignored and radio buttons should included when checked only and course only single value can included when name the same should improved whole just add the default value for check boxes copy link author freddy commented nov 2014 think should improved whole should similar much possible standard browser behavior when submitting form what the point form data method and submit connection class since uses the same form data gets sends the wrong values sending wrong values the server logic doesn like understand them and the form submission doesn work all copy link owner jhy commented apr 2015 implemented the checked attribute recently please feel free make big changes improve jhy closed this 01fcd apr 2015 copy link owner jhy commented apr 2015 thanks for the report jhy added commit that referenced this issue apr 2015 change note for 489 fix loading status checks 39e zazi added commit dswarm jsoup that referenced this issue oct 2015 form data submission fix 3195c don submit disabled elements set checkbox and radio default val unset fixes jhy 489 zazi added commit dswarm jsoup that referenced this issue oct 2015 change note for jhy 489 fix 7635f sign for free join this conversation git hub already have account sign comment assignees one assigned labels none yet projects none yet milestone milestone linked pull requests successfully merging pull request may close this issue none yet participants</description>
</buginformation>
<fixedfiles>
<file>org.jsoup.nodes.FormElement</file>
</fixedfiles>
</bug>
</bugrepository>
