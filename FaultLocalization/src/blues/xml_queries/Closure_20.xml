<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="Closure_20" link="https://storage.googleapis.com/google-code-archive/v2/code.google.com/closure-compiler/issues/issue-759.json">
<buginformation>
<summary>string  conversion  optimization  incorrect</summary>
<description>what  steps  will  reproduce  the  problem  var  value  function  return  undefined  string  what  the  expected  output  what  you  see  instead  expected  output  quot  object  object  quot  actual  output  quot  undefined  quot  what  version  the  product  are  you  using  what  operating  system  all  versions  http  closure  compiler  appspot  com  well  please  provide  any  additional  information  below  the  compiler  optimizes  string  calls  replacing  them  with  this  correct  most  cases  but  incorrect  corner  cases  like  the  one  mentioned  above  the  code  sample  violates  the  assumption  standard  methods  object  array  string  number  and  boolean  have  not  redefined  way  that  breaks  the  original  contract  http  code  google  com  closure  compiler  wiki compiler assumptions  not  actually  breaking  the  value  contract  takes  arguments  returns  string  and  has  side  effects  just  looks  like  that  the  assumption  the  compiler  currently  makes  string  foo  foo  isn  always  valid  the  question  remains  how  high  priority  such  case  the  value  method  from  the  code  sample  does  not  return  string  value  but  undefined  value  unless  another  assumption  violated  what  being  understood  the  contract  here  the  specification  reads  the  object  initialiser  creates  new  object  the  expression  new  object  where  object  the  standard  built  constructor  with  that  name  http  ecma  international  org  ecma  262  sec  when  called  with  arguments  the  object  constructor  returns  native ecma script  object  http  ecma  international  org  ecma  262  sec  object  prototype  value  returns  the  result  calling  object  passing  the  this  value  the  argument  since  the  this  value  not  host  object  http  ecma  international  org  ecma  262  sec  when  the  abstract  operation  object  called  with  argument  the  type  object  the  result  the  input  argument  the  constructed  native ecma script  object  http  ecma  international  org  ecma  262  sec  could  thereby  concluded  that  when  comes  the  code  sample  the  value  should  return  the  initialised  object  var  value  function  return  string  this  returns  object  object  the  closure  compiler  transforms  this  program  into  var  value  function  return  which  also  returns  object  object  for  getting  rid  this  optimization  doesn  really  help  and  wrong  this  issue  was  closed  revision  2061  this  issue  was  closed  revision  2061  this  issue  was  closed  revision  2061  this  issue  was  closed  revision  2061  this  issue  was  closed  revision  2061</description>
</buginformation>
<fixedfiles>
<file>com.google.javascript.jscomp.PeepholeSubstituteAlternateSyntax</file>
</fixedfiles>
</bug>
</bugrepository>
