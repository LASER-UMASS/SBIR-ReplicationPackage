<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="Closure_149" link="https://storage.googleapis.com/google-code-archive/v2/code.google.com/closure-compiler/issues/issue-205.json">
<buginformation>
<summary>add  option  turn  off  string  escaping</summary>
<description>what  steps  will  reproduce  the  problem  having  large  files  with  strings  patterns  for  hyphenation  see  http  code  google  com  hyphenator  and  ascii  characters  minifying  with  closure  compiler  makes  them  bigger  orig  216  bytes  orig  gzip  124  bytes  mini  110  770  bytes  mini  gzip  860  bytes  what  the  expected  output  like  able  turn  off  the  string  escaping  mechanism thanks can  you  more  specific  what  types  strings  are  being  escaped  that  not  need  can  you  provide  small  sample  this  show  the  compiled  results  gzipped  which  significantly  smaller  than  what  you  are  showing  http  closure  compiler  appspot  com  home closure compiler  compilation  level  simple  optimizations  output  file  name  default  code  url  http  hyphenator  googlecode  com  svn  trunk  hyphenator closure compiler  guessing  that  you  just  want  non  ascii  characters  encoded  compact  way  are  you  looking  for  the  charset  flag  thanks  for  your  quick  responses  concavelenz  meant  the  pattern  files  http  hyphenator  googlecode  com  svn  trunk  patterns  for  example  unicode  characters  are  escaped  becomes  0431  that  not  necessary  least  case  nicholas  santos  charset  for  input  files  looking  for  something  similar  for  the  output  think  charset  also  sets  the  charset  for  output  files  looks  like  funnels  utf  ascii  but  don  know  why  robert  our  encoding  expert  but  vacation  for  the  large  files  with  strings  you  might  specify  charset  that  compresses  better  for  your  files  you  might  choose  different  charset  encoding  for  input  and  output  either  utf  that  what  you  starting  with  one  the  russian  charsets  that  your  contents  suggested  the  name  note  that  the  charset  command  line  option  specifies  single  choice  for  input  and  output  you  may  need  change  the  charset  your  source  file  historically  the  closure  compiler  has  accepted  utf  encoded  input  files  and  has  output  bit  ascii  with  explicit  escaping  unicode  characters  generate  ascii  because  hit  bugs  over  the  years  where  some  proxy  servers  and  firewalls  would  either  corrupt  our java script  wouldn  pass  the java script  files  through  within  google  traded  off  the  increased  file  size  for  ensuring  our  applications  ran  many  environments  possible  also  guess  that  literal  strings  are  very  small  part  our java script  source  code  escaping  unicode  characters  hasn  been  considered  much  size  gain  mathiasnater  were  you  attempting  use  utf  output  charset  did  you  have  another  issue  bowdidge  prefer  use  utf  thanks  for  the  explanation  good  know  why  nevertheless  would  great  able  turn  this  feature  off  concavelenz  both  files  input  and  output  are  utf  encoded  not  encoding  issue  problem  that  non  ascii  strings  are  escaped  thus  the  file  size  the  pattern  files  with  several  strings  bigger  even  after  gzipping  would  great  able  turn  this  feature  off  this  issue  was  closed  revision  344  you  should  now  able  use  the  charset  utf  flag  encode  your  files  properly  while  great  set  the  encoding  the  output  file  thanks  for  that  primary  issue  add  option  turn  off  string  escaping  isn  fixed  strings  chars  that  aren  ascii  are  still  escaped  and  that  not  necessary  are  utf  missing  something  look  into  some  more  tomorrow  hmmm  looks  fixed  did  you  actually  checkout  the  compiler  head  rebuild  and  recompile  with  the  command  java  jar  build  compiler  jar  charset  utf  when  run  that  command  the  strings  are  encoded  correctly  and  the  file  size  comes  out  41kb  there  way  get  utf  output  from  the  closure  compiler  service  when  using  the  rest  api  seeing  all  the  unicode  characters  being  explicitly  escaped  this  not  fixed  the  closure  compiler  service  and  api  strings  are  always  escaped  into  ascii  characters  and  charset  parameter  omitted  this  parameter  not  documented  anywhere  looks  like  there  option  being  set  the  command  line  that  isn  getting  passed  through  all  cases  looks  like  this  isn  fixed  when  calling  from  ant  task  either  not  plan  add  charset  option  the  webservice  api  you  are  having  problems  with  the  command  line  api  then  please  file  bug  with  specific  details  about  how  you  are  invoking  the  compiler  what  you  see  and  what  you  expect  see  happy  look  into</description>
</buginformation>
<fixedfiles>
<file>com.google.javascript.jscomp.AbstractCommandLineRunner</file>
<file>com.google.javascript.jscomp.CommandLineRunner</file>
<file>com.google.javascript.jscomp.Compiler</file>
<file>com.google.javascript.jscomp.CompilerOptions</file>
</fixedfiles>
</bug>
</bugrepository>
