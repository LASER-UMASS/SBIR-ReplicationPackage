<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="JacksonDatabind_58" link="https://github.com/FasterXML/jackson-databind/issues/877">
<buginformation>
<summary>ignoring  the  cause  property  gae</summary>
<description>deserializing exception class from json google app engine causes this error caused java lang illegal argument exception can not access private java lang throwable java lang throwable cause from class java lang throwable failed set access java lang illegal access exception reflection not allowed private java lang throwable java lang throwable cause com fasterxml jackson databind util class util check and fix access class util java 505 com fasterxml jackson databind introspect annotated member fix access annotated member java 123 com fasterxml jackson databind deser bean deserializer factory construct settable property bean deserializer factory java 704 com fasterxml jackson databind deser bean deserializer factory add bean props bean deserializer factory java 501 com fasterxml jackson databind deser bean deserializer factory build throwable deserializer bean deserializer factory java 356 com fasterxml jackson databind deser bean deserializer factory create bean deserializer bean deserializer factory java 114 tried preventing this using json ignore properties json ignore properties cause public class exception extends runtime exception but the same error still occurs what doing wrong what else could also considered setting mapper feature can override access modifiers false but don like this solution because need this setting true some other cases particular provide arg constructors for jackson but they should public api the text was updated successfully but these errors were encountered copy link author mmazi commented jul 2015 also tried using mixins and still get the same error public abstract class throwable mixin json ignore private throwable cause json ignore public abstract throwable get cause object mapper add mix exception class throwable mixin class exception exception object mapper read value exception class copy link author mmazi commented jul 2015 was able fix this for case using custom jackson annotation introspector still shouldn any json ignore properties mixins the trick leaving this issue open because this may bug with handling ignored properties but may closed any time far concerned copy link member cowtowncoder commented jul 2015 mmazi yes should the problem here because exceptions general throwables not use standard pojo serializers deserializers the reason that there are couple problems making things work with fully default handling result support for many annotations missing incomplete this not intentional but rather based having implement support explicitly and some aspects are missing should possible add support for ignorals for example thank you for reporting the problem hope will able fix this future version cowtowncoder changed the title json ignore properties ignoring the cause property throwable gae json ignore properties ignoring the cause property throwable gae feb 2016 cowtowncoder added the label apr 2016 cowtowncoder removed the label may 2016 cowtowncoder added commit that referenced this issue may 2016 add unit test for 877 can not replicate the issue loading status checks 69571 cowtowncoder modified the milestones may 2016 copy link member cowtowncoder commented may 2016 not able reproduce the issue tests show that use json ignore properties works for serialization expected but the exception comes from deserialization that does not fail either but perhaps due gae specific problem this point would need way reproduce specific problem assuming still exists which not sure cowtowncoder closed this may 2016 copy link davidkilliansc commented sep 2016 having the same problem the issue that google app engine restricts reflection java lang throwable and probably other classes the jdk could exception serialization use throwable init cause and throwable set stacktrace rather than setting private fields cowtowncoder changed the title json ignore properties ignoring the cause property throwable gae json ignore properties ignoring the cause property throwable gae sep 2016 copy link member cowtowncoder commented sep 2016 davidkilliansc quite difficult work this without reproduction but theory might possible suppress set access call cases where can can determined that accessor not needed just that tricky ensure call does not happen from unit test guard against regression copy link davidkilliansc commented sep 2016 cowtowncoder for testable reproduction maybe security policy for the tests could configured restrict reflection access throwable copy link member cowtowncoder commented sep 2016 davidkilliansc that great idea wonder how easy that haven created those but sounds doable would useful for other tests too bet copy link member cowtowncoder commented sep 2016 looking throwable deserializer cause indeed passed via init cause attempt made try set underlying field however entirely possible that attempt call set access made earlier point when potential property found this should deferred since that property later replaced access change not really needed that early cowtowncoder reopened this sep 2016 cowtowncoder modified the milestones sep 2016 copy link member cowtowncoder commented sep 2016 added ugly fix for which specific check made for cause field throwable and skip forced access change also added test that sets specific security manager trigger fail jdk thanks again davidkilliansc for the suggestion will try improve the fix for ideally just defer forced access override but wanted keep patch somewhat minimal for reduce chance regression cowtowncoder closed this 2ccdee sep 2016 cowtowncoder added commit that referenced this issue sep 2016 cleaning 877 fix for deferring access forcing late loading status checks 8dbf 55f point copy link davidkilliansc commented sep 2016 cowtowncoder fantastic thanks sign for free join this conversation git hub already have account sign comment assignees one assigned labels none yet projects none yet milestone linked pull requests successfully merging pull request may close this issue none yet participants</description>
</buginformation>
<fixedfiles>
<file>com.fasterxml.jackson.databind.deser.BeanDeserializerFactory</file>
</fixedfiles>
</bug>
</bugrepository>
