<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="JacksonDatabind_24" link="https://github.com/FasterXML/jackson-databind/issues/889">
<buginformation>
<summary>configuring object mapper date format  changes  time  zone  when  serialising  joda date time</summary>
<description>the serialisation joda date time instances behaves differently when the object mapper had its date format configured the behaviour change illustrated the following code public static void main string args throws json processing exception system out println create object mapper write value string new date time 1988 date time zone utc private static object mapper create object mapper object mapper mapper new object mapper mapper register module create joda module mapper configure serialization feature write dates timestamps false system out println mapper get serialization config get time zone mapper set date format new simple date format yyyy system out println mapper get serialization config get time zone return mapper private static simple module create joda module simple module module new simple module module add serializer date time class new date time serializer new jackson joda date format date time format for pattern yyyy with zone utc return module when run with jackson the output sun util calendar zone info gmt offset dst savings use daylight false transitions last rule null sun util calendar zone info gmt offset dst savings use daylight false transitions last rule null 1988 when run with jackson the output sun util calendar zone info gmt offset dst savings use daylight false transitions last rule null sun util calendar zone info europe london offset dst savings 3600000 use daylight true transitions 242 last rule java util simple time zone europe london offset dst savings 3600000 use daylight true start year start mode start month start day start day week start time 3600000 start time mode end mode end month end day end day week end time 3600000 end time mode 1988 looks like the fix for 824 the cause the call mapper set date format causes the object mapper time zone set the jvm default time zone calling mapper set date format has effect its time zone the text was updated successfully but these errors were encountered wilkinsona mentioned this issue aug 2015 upgrade jackson spring projects spring boot 3569 closed copy link member cowtowncoder commented aug 2015 this does sound like problem unfortunately timezone handling rather messy area jackson databinding but sounds like this case solution might relatively easy trying retain existing configured time zone and not taking from date format cowtowncoder added commit that referenced this issue aug 2015 add test for 889 passes with 364ba cowtowncoder closed this 4ef aug 2015 cowtowncoder added this the milestone aug 2015 copy link member cowtowncoder commented aug 2015 the idea with the change was allow piggy backing timezone configuration but all all probably better not try too clever and since changed behavior for existing code thank you for reporting this and apologies for breakage fix will are getting enough fixes release that relatively soon now esp considering couple other issue with joda java datetime datatype modules cowtowncoder mentioned this issue sep 2015 serializing date failed new with faster xml jackson module scala 222 closed wilkinsona mentioned this issue oct 2015 upgrade jackson spring projects spring boot 4170 closed sign for free join this conversation git hub already have account sign comment assignees one assigned labels none yet projects none yet milestone linked pull requests successfully merging pull request may close this issue none yet participants</description>
</buginformation>
<fixedfiles>
<file>com.fasterxml.jackson.databind.cfg.BaseSettings</file>
</fixedfiles>
</bug>
</bugrepository>
