<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="JacksonDatabind_104" link="https://github.com/FasterXML/jackson-databind/issues/2167">
<buginformation>
<summary>large  iso  8601  dates  are  formatted  serialized  incorrectly</summary>
<description>edited the problem java text parse exception cannot parse date Áóù055 192 0000 not compatible with any standard forms yyyy sssz yyyy sss eee mmm yyyy zzz yyyy com fasterxml jackson databind util std date format parse std date format java 372 years 9999 are not rendered numbers more but with non numerical characters for the thousands digit the testcase public class test case public static void main string args throws json processing exception parse exception std date format formatter new std date format system out println formatter format new date long min value system out println formatter format new date long max value system out println formatter parse formatter format new date long min value system out println formatter parse formatter format new date long max value assert formatter parse formatter format new date long max value get time long max value will fail due lack support for negative dates assert formatter parse formatter format new date long min value get time long min value expected all dates are formatted correctly meaning years bigger than 9999 some sort exception telling the data not supported the location something https github com faster xml jackson databind blob master src main java com fasterxml jackson databind util std date format java 442 suggestion adding with integer not safe operation but you are doing you need upper bound check private static void pad string buffer buffer int value int tens value tens pad buffer tens buffer append char value return tens buffer append else buffer append char tens value tens buffer append char value private static void pad string buffer buffer int value int value 100 100 pad buffer pad buffer value 100 return buffer append else buffer append char value 100 pad buffer value you not want support such high years then throw some sort exception protected void format time zone locale loc date date string buffer buffer calendar cal get calendar cal set time date int year cal get calendar year cal get calendar era year year year 9999 year throw new index out bounds exception year not within the range 9999 integer string year pad buffer cal get calendar year pad buffer year buffer append pad buffer cal get calendar month buffer append pad buffer cal get calendar day month the text was updated successfully but these errors were encountered cowtowncoder added active labels oct 2018 copy link member cowtowncoder commented oct 2018 good catch agree one the other should supported ideally probably support for years beyond 9999 copy link author joaoe commented oct 2018 you want support years 9999 then you should support also years the iso spec requires numeral year year 1000 needs padded with done right now beyond that the spec optionally specifies that years can have more numerals and that years before have negative sign starting 2018 2018 0001 bce 0000 bce 0001 bce 0002 etc the spec also says that there agreement between the parties that exchange the information then the application can use the signed big year format there should toggle enable that and default make limited 0000 9999 copy link member cowtowncoder commented nov 2018 think leave support for bce for another issue anyone has time and interest and this will focused improving handling future dates copy link member cowtowncoder commented nov 2018 hmmh reading this https www tondering claus cal iso 8601 php interesting mentioning that positive prefix must used more digits and for think maybe should actually support serialization course being able deserialize any that yet another issue cowtowncoder removed the active label nov 2018 cowtowncoder added this the milestone nov 2018 cowtowncoder changed the title large dates are formatted serialized incorrectly large iso 8601 dates are formatted serialized incorrectly nov 2018 cowtowncoder closed this 83c nov 2018 sign for free join this conversation git hub already have account sign comment assignees one assigned labels none yet projects none yet milestone linked pull requests successfully merging pull request may close this issue none yet participants</description>
</buginformation>
<fixedfiles>
<file>com.fasterxml.jackson.databind.util.StdDateFormat</file>
</fixedfiles>
</bug>
</bugrepository>
