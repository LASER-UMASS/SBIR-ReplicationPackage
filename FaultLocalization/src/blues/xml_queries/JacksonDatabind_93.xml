<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="JacksonDatabind_93" link="https://github.com/FasterXML/jackson-databind/issues/1872">
<buginformation>
<summary>when  validating  spring  interface</summary>
<description>edited jackson databind jackson databind and jackson databind snapshot sub type validator validate sub type fails with null pointer exception the java type get raw class interface that starts with org springframework for example the following will fail package org springframework security core import java util public class authentication private list granted authority authorities new array list granted authority public list granted authority get authorities return this authorities public void set authorities list granted authority authorities this authorities authorities package org springframework security core public interface granted authority string get authority test public void validate sub type fails with npe throws exception object mapper mapper new object mapper mapper enable default typing object mapper default typing non final json type info property string json class org springframework security core authentication authorities java util array list authentication authentication mapper read value json authentication class with the following stacktrace java lang null pointer exception com fasterxml jackson databind jsontype impl sub type validator validate sub type sub type validator java com fasterxml jackson databind deser bean deserializer factory validate sub type bean deserializer factory java 916 com fasterxml jackson databind deser bean deserializer factory create bean deserializer bean deserializer factory java 135 com fasterxml jackson databind deser deserializer cache create deserializer deserializer cache java 411 com fasterxml jackson databind deser deserializer cache create deserializer deserializer cache java 349 com fasterxml jackson databind deser deserializer cache create and cache deserializer cache java 264 com fasterxml jackson databind deser deserializer cache create and cache value deserializer deserializer cache java 244 com fasterxml jackson databind deser deserializer cache find value deserializer deserializer cache java 142 com fasterxml jackson databind deserialization context find contextual value deserializer deserialization context java 444 com fasterxml jackson databind deser std collection deserializer create contextual collection deserializer java 183 com fasterxml jackson databind deser std collection deserializer create contextual collection deserializer java com fasterxml jackson databind deserialization context handle primary contextualization deserialization context java 651 com fasterxml jackson databind deser bean deserializer base resolve bean deserializer base java 471 com fasterxml jackson databind deser deserializer cache create and cache deserializer cache java 293 com fasterxml jackson databind deser deserializer cache create and cache value deserializer deserializer cache java 244 com fasterxml jackson databind deser deserializer cache find value deserializer deserializer cache java 142 com fasterxml jackson databind deserialization context find root value deserializer deserialization context java 477 com fasterxml jackson databind object mapper find root deserializer object mapper java 4178 com fasterxml jackson databind object mapper read map and close object mapper java 3997 com fasterxml jackson databind object mapper read value object mapper java 2992 prior versions the test works the text was updated successfully but these errors were encountered cowtowncoder added active labels jan 2018 copy link member cowtowncoder commented jan 2018 that sounds like very interesting behavior thank you for reporting this will see what gives copy link member cowtowncoder commented jan 2018 probably not due package name but due interface will verify copy link author rwinch commented jan 2018 left out analysis the original report but perhaps this will help far can tell must both interface and start with org springframework does not start with org springframework will not enter this block the null pointer exception caused this line due the fact that interfaces not extend object one way resolve the issue change the line for class cls raw cls object class cls cls get superclass for class cls raw cls object class cls null cls cls get superclass copy link member cowtowncoder commented jan 2018 actually correction both guard statement for spring packages nicely isolates problem the area being patched think this alone would warrant micro patch there guess that upside backport the other fix and then could use help verifying there aren other issues copy link author rwinch commented jan 2018 always thanks for the fast response tracking what believe one last issue having with snapshot but not sure will get anything reported until monday want spend some time isolating the problem and ensuring the problem not end cowtowncoder changed the title null pointer exception sub type validator validate sub type when validating spring interface null pointer exception sub type validator validate sub type when validating spring interface jan 2018 copy link member cowtowncoder commented jan 2018 rwinch your help much appreciated want make sure possible that can close this branch problems before and and will coordinate with you before going with release monday next week general fine from perspective since although want get out don want rush things plus there may couple other things could perhaps solve then cowtowncoder closed this 755e 3bc jan 2018 copy link author rwinch commented jan 2018 edited thanks for your responsiveness related note appears that snapshot hasn been updated since december any chance you could fix that believe related that appears that travis not building branch but may wrong that this point fairly certain this point that the remaining issue with updating jackson spring security end will sure validate and before the end monday copy link member cowtowncoder commented jan 2018 rwinch yes mvn deploy from home thought settings used should allow build master and from travis yml master but not quite sure why wouldn enabled copy link member cowtowncoder commented jan 2018 found think didn fully understand branch whitelisting applies each commit separately plus settings were wrong wrt that copy link author rwinch commented jan 2018 cowtowncoder want make sure possible that can close this branch problems before and and will coordinate with you before going with release monday next week general fine from perspective since although want get out don want rush things plus there may couple other things could perhaps solve then thanks for waiting and sorry for delayed response delay was due deliberating additional issue ended reporting 1880 initially was thinking perhaps this just bug fix which broke passivity which case wasn issue but the more thought about thought was bug thanks again for all your help cowtowncoder removed the active label jan 2018 mcasasola mentioned this issue feb 2018 fix 1872 1923 merged cowtowncoder added commit that referenced this issue feb 2018 fix 1872 1923 loading status checks 803a cowtowncoder added this the milestone feb 2018 copy link member cowtowncoder commented feb 2018 fix included cowtowncoder mentioned this issue feb 2018 another two gadgets exploit default typing issue jackson databind cve 2018 5968 1899 closed sign for free join this conversation git hub already have account sign comment assignees one assigned labels none yet projects none yet milestone linked pull requests successfully merging pull request may close this issue none yet participants</description>
</buginformation>
<fixedfiles>
<file>com.fasterxml.jackson.databind.jsontype.impl.SubTypeValidator</file>
</fixedfiles>
</bug>
</bugrepository>
