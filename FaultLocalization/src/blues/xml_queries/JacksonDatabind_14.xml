<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="JacksonDatabind_14" link="https://github.com/FasterXML/jackson-databind/issues/744">
<buginformation>
<summary>custom  deserializer  with  parent  object  update</summary>
<description>have custom deserializer for data instance data contained data when updating existing instance data opposed creating new one get exception when deserializing via json node object deserializing via string object works import java exception import org junit assert import org junit test import com fasterxml jackson core json parser import com fasterxml jackson core json processing exception import com fasterxml jackson core json token import com fasterxml jackson databind deserialization context import com fasterxml jackson databind json node import com fasterxml jackson databind object mapper import com fasterxml jackson databind deser std std deserializer import com fasterxml jackson databind module simple module public class test deser test static class data public int public int static class data public data new data public int static class data deserializer extends std deserializer data private static final long serial version uid data deserializer super data class public data deserialize json parser deserialization context ctxt throws json processing exception exception assert get current token json token start object json node node get codec read tree data new data return test public void test throws exception object mapper mapper new object mapper simple module module new simple module module add deserializer data class new data deserializer mapper register module module data new data string json string mapper write value string json node json node mapper value tree create parent data new via string mapper read value json string data class assert assert equals new via string assert assert equals new via string data new via node mapper tree value json node data class assert assert equals new via node assert assert equals new via node update parent data upd via string new data data upd via node new data assert assert equals upd via string assert assert equals upd via string mapper reader for updating upd via string read value json string assert assert equals upd via string assert assert equals upd via string assert assert equals upd via node assert assert equals upd via node fails here mapper reader for updating upd via node read value json node assert assert equals upd via node assert assert equals upd via node the trace com fasterxml jackson databind exc unrecognized property exception unrecognized field class myorg test deser test data not marked ignorable known properties source line column through reference chain myorg data myorg data com fasterxml jackson databind exc unrecognized property exception from unrecognized property exception java com fasterxml jackson databind deserialization context report unknown property deserialization context java 817 com fasterxml jackson databind deser std std deserializer handle unknown property std deserializer java 954 com fasterxml jackson databind deser bean deserializer base handle unknown property bean deserializer base java 1324 com fasterxml jackson databind deser bean deserializer base handle unknown vanilla bean deserializer base java 1302 com fasterxml jackson databind deser bean deserializer vanilla deserialize bean deserializer java 249 com fasterxml jackson databind deser bean deserializer deserialize bean deserializer java 136 com fasterxml jackson databind object reader bind tree object reader java 1478 com fasterxml jackson databind object reader read tree object reader java 1020 myorg test deser test data deserializer deserialize test deser test java myorg test deser test data deserializer deserialize test deser test java com fasterxml jackson databind deser settable bean property deserialize settable bean property java 523 com fasterxml jackson databind deser impl field property deserialize and set field property java 101 com fasterxml jackson databind deser impl bean property map find deserialize and set bean property map java 285 com fasterxml jackson databind deser bean deserializer deserialize bean deserializer java 220 com fasterxml jackson databind object reader bind and close object reader java 1443 com fasterxml jackson databind object reader read value object reader java 1154 myorg test deser test test test deser test java sun reflect native method accessor impl invoke native method sun reflect native method accessor impl invoke native method accessor impl java sun reflect delegating method accessor impl invoke delegating method accessor impl java java lang reflect method invoke method java 606 org junit runners model framework method run reflective call framework method java org junit internal runners model reflective callable run reflective callable java org junit runners model framework method invoke explosively framework method java org junit internal runners statements invoke method evaluate invoke method java org junit runners parent runner run leaf parent runner java 325 org junit runners block unit class runner run child block unit class runner java org junit runners block unit class runner run child block unit class runner java org junit runners parent runner run parent runner java 290 org junit runners parent runner schedule parent runner java org junit runners parent runner run children parent runner java 288 org junit runners parent runner access 000 parent runner java org junit runners parent runner evaluate parent runner java 268 org junit runners parent runner run parent runner java 363 org eclipse jdt internal junit runner unit test reference run unit test reference java org eclipse jdt internal junit runner test execution run test execution java org eclipse jdt internal junit runner remote test runner run tests remote test runner java 459 org eclipse jdt internal junit runner remote test runner run tests remote test runner java 675 org eclipse jdt internal junit runner remote test runner run remote test runner java 382 org eclipse jdt internal junit runner remote test runner main remote test runner java 192 the text was updated successfully but these errors were encountered migel changed the title custom deserializer with object update custom deserializer with parent object update mar 2015 copy link member cowtowncoder commented apr 2015 interesting can reproduce with given test case one thing notice that replacing get codec read tree simpler equivalent read value tree give the exception but simple skip children does not something reading tree not working expected copy link member cowtowncoder commented apr 2015 whoa internally looks like json node deserializer resolved deserializer for data wires getting crossed badly somewhere copy link member cowtowncoder commented apr 2015 actually not problem with caching but rather with root deserializer that object reader caches locally need see how this can passed cowtowncoder added this the milestone apr 2015 cowtowncoder added commit that referenced this issue apr 2015 backport 744 fix 58f cowtowncoder added commit that referenced this issue apr 2015 and actual 744 fix here doh 85282b cowtowncoder added commit that referenced this issue apr 2015 prune temp only fix for 744 after merge 2ff cowtowncoder closed this 817a 45a apr 2015 copy link member cowtowncoder commented apr 2015 fixed although did also backport just case sign for free join this conversation git hub already have account sign comment assignees one assigned labels none yet projects none yet milestone linked pull requests successfully merging pull request may close this issue none yet participants</description>
</buginformation>
<fixedfiles>
<file>com.fasterxml.jackson.databind.ObjectReader</file>
</fixedfiles>
</bug>
</bugrepository>
