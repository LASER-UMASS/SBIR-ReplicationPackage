<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="JacksonDatabind_4" link="https://github.com/FasterXML/jackson-databind/issues/506">
<buginformation>
<summary>index  never  set  for  collection  and  array invalid format exception  reference</summary>
<description>when invalid format exception created index values always indeed string collection deserializer and collection deserializer the exception not caught the json mapping exception shoud caught and the index should added and based the result size without this information there way get the index the item involved the mapping error the text was updated successfully but these errors were encountered copy link member cowtowncoder commented jul 2014 thank you for reporting this intent indeed report correct index copy link member cowtowncoder commented jul 2014 forgot one thing this has only been supported serialization side since that where more obviously needed but would nice deserialization too given that generally collection entry counts and json index which would available via json parser align and since actual json parser instance may may not available also case nested json arrays locating index problematic container might tricky cowtowncoder closed this 080e jul 2014 cowtowncoder added this the milestone jul 2014 copy link member cowtowncoder commented jul 2014 fixed for relevant deserializers please let know missed something also added basic unit tests copy link author fdaugan commented jul 2014 just tested this change and this perfect you have added the missing reference collection array and attached the index perfect now have the entire path thanks copy link author fdaugan commented jul 2014 just thing the index well set but the invalid format exception reference from class instead the true collection array reference having this information could usefull see the previous successfully parsed collection items copy link member cowtowncoder commented jul 2014 fabdouglas right the problem with array that one only instantiated after collecting all entries since arrays are not resizable with collections this may not the case should back and add reference possible realize that non type safety between class and instance awkward but sometimes that best that can done when deserializing problem occurs during deserialization creator parameter due buffering cowtowncoder added commit that referenced this issue jul 2014 add improvements for 506 add referring object for collections loading status checks 4ce for arrays copy link member cowtowncoder commented jul 2014 one possible thing would create incomplete arrays although this would only for purposes error reporting but wondering this might not actually good thing possible indicate for example what was the preceding non erroneous element perhaps would possible further improve this copy link author fdaugan commented jul 2014 indeed the array copy may cause serious performance issues for large objects the main goal this issue was the path making possible for json client spot the incorrect data copy link author fdaugan commented jul 2014 btw the target milestone currently instead cowtowncoder removed this from the milestone jul 2014 copy link member cowtowncoder commented jul 2014 fabdouglas thanks fixed milestone and yes perhaps consider further improvements later while constructing array can useful could also problematic might want use heuristics determine that needs more thinking fdaugan added commit fdaugan jackson databind that referenced this issue aug 2014 test for faster xml 506 dfd 4634 copy link contributor tea dragon commented aug 2014 there are couple places you use the index that think might better represented buffer buffered size copy link member cowtowncoder commented aug 2014 sounds plausible can you point those can fix them cowtowncoder added commit that referenced this issue aug 2014 yet some more tweaking 506 loading status checks 64a 27bc copy link contributor tea dragon commented aug 2014 probably all ones using gets periodically reset just the index into temporary buffer index might get misreported index unless misreading badly see here for example https github com faster xml jackson databind blob master src main java com fasterxml jackson databind deser std object array deserializer java 160 can pull together the full list and try reproduce test case this doesn look convincing you cowtowncoder added commit that referenced this issue aug 2014 yet more fixing for 506 loading status checks 88a 87c copy link member cowtowncoder commented aug 2014 yes see you are absolutely right thanks copy link author fdaugan commented aug 2014 there chance attach this issue the next milstone copy link member cowtowncoder commented aug 2014 but someone wants for branch can merge fdaugan mentioned this issue sep 2014 test for 506 513 closed aseovic mentioned this issue jan 2016 possible fix for 1103 1104 closed sign for free join this conversation git hub already have account sign comment assignees one assigned labels none yet projects none yet milestone milestone linked pull requests successfully merging pull request may close this issue none yet participants</description>
</buginformation>
<fixedfiles>
<file>com.fasterxml.jackson.databind.deser.std.StringArrayDeserializer</file>
</fixedfiles>
</bug>
</bugrepository>
