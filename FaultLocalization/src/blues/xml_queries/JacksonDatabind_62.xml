<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="JacksonDatabind_62" link="https://github.com/FasterXML/jackson-databind/issues/1392">
<buginformation>
<summary>custom unmodifiable set mixin  fails  jackson  but  works  jackson</summary>
<description>like able deserialize unmodifiable set with default typing enabled this have created unmodifiable set mixin shown below note you can find minimal project with all the source code reproduce this issue https github com rwinch jackson unmodifiableset mixin import com fasterxml jackson annotation json creator import com fasterxml jackson annotation json type info import java util set json type info use json type info class include json type info property public abstract class unmodifiable set mixin json creator public unmodifiable set mixin set then try use this deserialize empty set public class unmodifiable set mixin test static final string expected json java util collections unmodifiable set object mapper mapper before public void setup mapper new object mapper mapper enable default typing object mapper default typing non final json type info property mapper add mix collections unmodifiable set collections string empty set get class unmodifiable set mixin class test suppress warnings unchecked public void read throws exception set string foo mapper read value expected json set class assert that foo empty the test passes with jackson but fails using jackson including jackson with the following stack trace java lang illegal state exception default constructor for collection type class java util collections unmodifiable set contains simple type class java lang object com fasterxml jackson databind deser std std value instantiator create using default std value instantiator java 240 com fasterxml jackson databind deser std collection deserializer deserialize collection deserializer java 249 com fasterxml jackson databind deser std collection deserializer deserialize collection deserializer java com fasterxml jackson databind jsontype impl array type deserializer deserialize array type deserializer java 110 com fasterxml jackson databind jsontype impl array type deserializer deserialize typed from array array type deserializer java com fasterxml jackson databind deser std collection deserializer deserialize with type collection deserializer java 310 com fasterxml jackson databind deser impl type wrapped deserializer deserialize type wrapped deserializer java com fasterxml jackson databind object mapper read map and close object mapper java 3788 com fasterxml jackson databind object mapper read value object mapper java 2779 sample unmodifiable set mixin test read unmodifiable set mixin test java sun reflect native method accessor impl invoke native method sun reflect native method accessor impl invoke native method accessor impl java sun reflect delegating method accessor impl invoke delegating method accessor impl java java lang reflect method invoke method java 498 org junit runners model framework method run reflective call framework method java org junit internal runners model reflective callable run reflective callable java org junit runners model framework method invoke explosively framework method java org junit internal runners statements invoke method evaluate invoke method java org junit internal runners statements run befores evaluate run befores java org junit runners parent runner run leaf parent runner java 325 org junit runners block unit class runner run child block unit class runner java org junit runners block unit class runner run child block unit class runner java org junit runners parent runner run parent runner java 290 org junit runners parent runner schedule parent runner java org junit runners parent runner run children parent runner java 288 org junit runners parent runner access 000 parent runner java org junit runners parent runner evaluate parent runner java 268 org junit runners parent runner run parent runner java 363 org eclipse jdt internal junit runner unit test reference run unit test reference java org eclipse jdt internal junit runner test execution run test execution java org eclipse jdt internal junit runner remote test runner run tests remote test runner java 459 org eclipse jdt internal junit runner remote test runner run tests remote test runner java 678 org eclipse jdt internal junit runner remote test runner run remote test runner java 382 org eclipse jdt internal junit runner remote test runner main remote test runner java 192 this seems like passivity issue there workaround for this problem the text was updated successfully but these errors were encountered copy link member cowtowncoder commented oct 2016 interesting true zero arg constructor but that not what mix tries can reproduce this hope see what causes the problem signature seems match copy link member cowtowncoder commented oct 2016 looking through notes guessing this might due one 936 1010 most likely culprit copy link member cowtowncoder commented oct 2016 almost certain this regression due 1010 which lead separation delegating array creators from other kinds looks like bean deserializer base handles but collection deserializer was not retrofitted nor very likely other non pojo deseiralizers cowtowncoder added commit that referenced this issue oct 2016 add failing test for 1392 loading status checks 987a 463 rwinch mentioned this issue oct 2016 updating jackson fails spring projects spring security 4073 closed cowtowncoder added this the milestone oct 2016 copy link member cowtowncoder commented oct 2016 sigh nasty one solve for patch but think found way need figure out clean for very least master cowtowncoder closed this 94c oct 2016 copy link author rwinch commented oct 2016 thanks for the fast turn around oct 2016 tatu saloranta notifications github com wrote closed 1392 1392 via 94c 94c you are receiving this because you authored the thread reply this email directly view git hub 1392 comment mute the thread https github com notifications unsubscribe auth aawib rnunez ybwga 0jtgvlspk nks 5qwu mxga sign for free join this conversation git hub already have account sign comment assignees one assigned labels none yet projects none yet milestone linked pull requests successfully merging pull request may close this issue none yet participants</description>
</buginformation>
<fixedfiles>
<file>com.fasterxml.jackson.databind.deser.std.CollectionDeserializer</file>
</fixedfiles>
</bug>
</bugrepository>
