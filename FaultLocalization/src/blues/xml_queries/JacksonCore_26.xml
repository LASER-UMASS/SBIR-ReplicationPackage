<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="JacksonCore_26" link="https://github.com/FasterXML/jackson-core/issues/531">
<buginformation>
<summary>non  blocking  parser  reports  incorrect  locations  when  fed  with  non  zero  offset</summary>
<description>edited when feeding non blocking parser the input array offset leaks into the offsets reported get current location and get token location for example feeding with offset yields tokens whose reported locations are greater than they should likewise the current location reported the parser greater than the correct location not possible for user work around this issue subtracting from the reported locations because the token location may have been established earlier feeding with different offset jackson version unit test import com fasterxml jackson core json factory import com fasterxml jackson core json parser import com fasterxml jackson core json token import com fasterxml jackson core async byte array feeder import org junit test import static java nio charset standard charsets utf import static org junit assert assert equals public class feeding offset test test public void input offset should not affect locations throws exception json factory json factory new json factory json parser parser json factory create non blocking byte array parser byte array feeder feeder byte array feeder parser get non blocking input feeder byte input get bytes utf feeder feed input input assert equals json token start array parser next token assert equals parser get current location get byte offset actual assert equals parser get token location get byte offset actual feeder feed input input assert equals json token start array parser next token assert equals parser get current location get byte offset assert equals parser get token location get byte offset the text was updated successfully but these errors were encountered cowtowncoder added active labels apr 2019 copy link member cowtowncoder commented apr 2019 thank you for reporting this problem cowtowncoder removed the active label apr 2019 cowtowncoder added this the milestone apr 2019 cowtowncoder removed this from the milestone apr 2019 cowtowncoder added commit that referenced this issue apr 2019 backport 531 fix loading status checks 20807 cowtowncoder closed this 83ce apr 2019 finaglehelper pushed commit twitter util that referenced this issue jul 2019 update jackson loading status checks 0bcd problem order make util cross building with scala need move jackson for support solution upgrade result bonus jackson fixes bug faster xml jackson core 531 when feeding async json parser remove the sliced offset now parser records the right position differential revision https phabricator twitter biz 345969 finaglehelper pushed commit twitter finagle that referenced this issue jul 2019 update jackson loading status checks 464ae problem order make util cross building with scala need move jackson for support solution upgrade result bonus jackson fixes bug faster xml jackson core 531 when feeding async json parser remove the sliced offset now parser records the right position differential revision https phabricator twitter biz 345969 finaglehelper pushed commit twitter twitter server that referenced this issue jul 2019 update jackson loading status checks 185d problem order make util cross building with scala need move jackson for support solution upgrade result bonus jackson fixes bug faster xml jackson core 531 when feeding async json parser remove the sliced offset now parser records the right position differential revision https phabricator twitter biz 345969 finaglehelper pushed commit twitter finatra that referenced this issue jul 2019 update jackson 050be problem order make util cross building with scala need move jackson for support solution upgrade result bonus jackson fixes bug faster xml jackson core 531 when feeding async json parser remove the sliced offset now parser records the right position differential revision https phabricator twitter biz 345969 alanbato added commit twitter finagle that referenced this issue jul 2019 update jackson loading status checks 9225bbf problem order make util cross building with scala need move jackson for support solution upgrade result bonus jackson fixes bug faster xml jackson core 531 when feeding async json parser remove the sliced offset now parser records the right position git origin rev 63afbf 0bdede 0777cf 869b 83a 9620e 76cb alanbato added commit twitter finagle that referenced this issue jul 2019 update jackson loading status checks 192f 477 problem order make util cross building with scala need move jackson for support solution upgrade result bonus jackson fixes bug faster xml jackson core 531 when feeding async json parser remove the sliced offset now parser records the right position git origin rev 63afbf 0bdede 0777cf 869b 83a 9620e 76cb sign for free join this conversation git hub already have account sign comment assignees one assigned labels projects none yet milestone milestone linked pull requests successfully merging pull request may close this issue none yet participants</description>
</buginformation>
<fixedfiles>
<file>com.fasterxml.jackson.core.json.async.NonBlockingJsonParser</file>
</fixedfiles>
</bug>
</bugrepository>
