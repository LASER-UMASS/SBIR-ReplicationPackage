<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="Closure_8" link="https://storage.googleapis.com/google-code-archive/v2/code.google.com/closure-compiler/issues/issue-820.json">
<buginformation>
<summary>obfuscated  code  triggers type error  firefox</summary>
<description>the  closure  compiler  great  tool  but  having  problems  with  often  produces  code  that  triggers type error  firefox  even  though  original  code  does  not  here  why  the  original  code  may  look  follows  function  argument  use  argument  var  variable  argument  not  used  anymore  but  often  closure  compiler  will  translate  function  var  this  not  wrong  since  argument  longer  used  closure  compiler  tries  reuse  the  name  for  something  else  this  triggers  the  following  firefox type error  variable  declares  argument  still  the  resulting  code  correct  and  runs  but  very  annoying  debugging  when  getting  all  the  time  lot type errors  the  console  also  our  customers  have  noticed  these type errors  when  testing  the  product  and  undermines  our  code  reliability  could  you  please  rename  variables  such  way  avoid  these type errors  not  rename  vars  way  that  will  coincide  with  function  argument  names  what  steps  will  reproduce  the  problem  this  happens  reproducibly  our  real  life  input  which  cannot  submit  for  various  reasons  problem  description  not  clear  enough  please  make  comment  and  will  try  construct  some  artificial  example  that  also  triggers  the type error  what  the  expected  output  what  you  see  instead  the  expected  output  obfuscated  code  with  variables  renamed  unique  names  order  not  trigger type error  firefox  instead  see  variables  renamed  the  same  name  which  runs  but  firefox  complains  with type error  what  version  the  product  are  you  using  what  operating  system  closure  compiler  http  code  google  com  closure  compiler  version  20120917  revision  2180  built  2012  please  provide  any  additional  information  below  seems  like  could  avoid  redeclaring  the  var  and  simply  reuse  the  name  which  might  size  win  well  although  seems  strange  that  generating  this  warning  using type error  have  you  filed  bug  for  this  well  hmmm  haven  been  able  reproduce  this  either  the  closure  compiler  side  the  firefox  side  can  you  give  example  script  and  compiler  invocation  where  this  happens  alternatively  there  some  special  setting  firefox  that  have  turn  make  this  console  warning  appear  had  that  could  probably  find  own  repro  case  can  reproduce  the  firefox  side  enable  javascript  options  strict  about  config  this  option  isn  normally  personally  not  sure  care  about  this  this  really  noisy  and  somewhat  contraversal  http  www  howtocreate strict firefox  html  would  happy  remove  the  extra  var  however  can  get  repro  case  have  never  fiddled  with  firefox  options  but  have  use  strict  all  sources  help  find  strange  bugs  etc  here  sample  that  triggers  this  for  reference  use  strict  function  var  this  not  produced  closure  compiler  but  would  very  time  consuming  try  guess  some  source  that  after  compilation  has  this  problem  because  don  know  when  closure  compiler  produces  such  outcome  get  this  multiple  times  when  compiling  huge  codebase  but  can  provide  small  sample  that  does  here  are  some  samples  code  actually  produced  closure  compiler  window  onpopstate  function  state  state view name  var  state view name  faq  you  can  see  var  necessary  because  new  variable  declared  another  example  function  var get time  function  here  and  are  new  var  needed  currently  getting  this  error  times  functions  and  each  case  mix  existing  function  arguments  and  new  variables  that  are  assigned  var  statement  did  some  more  investigating  and  can  see  that  closure  compiler  actually  removes  use  strict  when  compiling  the  resulting  script  not  strict  mode  actually  consider  this  behavior  bug  that  closure  compiler  removes  use  strict  statement  should  file  separate  bug  report  for  that  believe  you  that  this  happens  looking  for  repro  case  don  need  more  examples  output  actually  that  does  help  was  able  put  together  unit  test  for collaspse variable declarations  that  reproduces  the  problem  function  var  var  gets  collapsed  function  var  this  issue  was  closed  revision  2226</description>
</buginformation>
<fixedfiles>
<file>com.google.javascript.jscomp.CollapseVariableDeclarations</file>
</fixedfiles>
</bug>
</bugrepository>
