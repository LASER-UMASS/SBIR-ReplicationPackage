<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="JacksonDatabind_79" link="https://github.com/FasterXML/jackson-databind/issues/1607">
<buginformation>
<summary>json identity reference  not  used  when  setup  class  only</summary>
<description>trying setup json identity info json identity reference order serialize all references given class object and deserialize them later using custom object resolver retrieve the proper referenced instance use json identity reference always true order enforce exporting the object all cases does not work expected when define the annotation only the class but works fine when set directly the property would rather not have define every property will probably miss some from what see bean serializer base the always reset when not object info found the accessor object info object info intr find object info accessor object info null object override but maybe object ref oiw null object info intr find object reference info accessor new object info name for object ref null null null oiw object writer with always object info get always shouldn kept the current value when override found tried set back the default object info created with name for object ref but not sure this the right way fix this here test added test object serialization for this case json identity info generator object generators int sequence generator class property json identity reference always true static class really always public int value public really always this public really always int value json property order alphabetic true static class really always container json identity reference always true public always new always public really always new really always public void test really always throws exception string json mapper write value string new really always container assert equals json the text was updated successfully but these errors were encountered cowtowncoder added the label apr 2017 copy link member cowtowncoder commented apr 2017 thank you for reporting this sounds like bug from first reading one quick question this with recent version like copy link author vboulaye commented apr 2017 yes this recent version testing with and reproduced master cowtowncoder removed the label apr 2017 cowtowncoder closed this 859af apr 2017 cowtowncoder added this the milestone apr 2017 copy link member cowtowncoder commented apr 2017 yes fixed not sure this the best fix either handling defaulting done bit odd way but handles this case does not break any other tests sign for free join this conversation git hub already have account sign comment assignees one assigned labels none yet projects none yet milestone linked pull requests successfully merging pull request may close this issue none yet participants</description>
</buginformation>
<fixedfiles>
<file>com.fasterxml.jackson.databind.introspect.JacksonAnnotationIntrospector</file>
<file>com.fasterxml.jackson.databind.introspect.ObjectIdInfo</file>
<file>com.fasterxml.jackson.databind.ser.std.BeanSerializerBase</file>
</fixedfiles>
</bug>
</bugrepository>
