<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="Mockito_27" link="https://github.com/mockito/mockito/issues/282">
<buginformation>
<summary>exception  when  stubbing  more  than  once  with  when then throw</summary>
<description>create mock and stub method throws exception and that twice the first exception will thrown upon invoking the second stub instruction example test public void test throw exception object mockito mock object class test behavior with runtimeexception mockito when string then throw runtime exception class test behavior with another exception this throws runtime exception mockito when string then throw illegal argument exception class can work around this the other way around with throw when but lose type safety then can you fix this the text was updated successfully but these errors were encountered copy link contributor bric commented aug 2015 don exaclty know what the actual code supposed achieve but the mock supposed raise different exceptions subsequent interaction then mockito misused this case correct code would test public void test throw exception object mockito mock object class mockito when string then throw runtime exception class then throw illegal argument exception class assert that thrown string instance runtime exception class assert that thrown string instance illegal argument exception class this assert that thrown comes with assert java copy link author 3rm commented aug 2015 example isn the best one imagine have method with input parameter depeding the parameter can throw exception when test the calling method the above mentioned one have two test cases example above first test what happens when exception thrown after that want test with exception copy link contributor timvd lippe commented aug 2015 should you not create different testcases for this therefore test case verifies that whenever you provide input parameter throws the other test case verifies that whenever your provide input parameter throws then the stubbing for each case done seperate testcase causing the correct exception each case copy link author 3rm commented aug 2015 yes that works copy link contributor timvd lippe commented jun 2016 closing resolved per 282 comment timvd lippe closed this jun 2016 sign for free join this conversation git hub already have account sign comment assignees one assigned labels none yet projects none yet milestone milestone linked pull requests successfully merging pull request may close this issue none yet participants</description>
</buginformation>
<fixedfiles>
<file>org.mockito.internal.util.MockUtil</file>
</fixedfiles>
</bug>
</bugrepository>
