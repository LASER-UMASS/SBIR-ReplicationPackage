<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="JacksonDatabind_32" link="https://github.com/FasterXML/jackson-databind/issues/989">
<buginformation>
<summary>deserialization  from  java  lang  object  causes  out  end  object  token  error</summary>
<description>faced with problem that too similar this one 941 expect that will parsed correctly empty map when using json creator found that this case invalid https github com faster xml jackson databind blob jackson databind src main java com fasterxml jackson databind deser std untyped object deserializer java 272 but why here the minimum code reproduce import java exception import com fasterxml jackson annotation json creator import com fasterxml jackson databind object mapper public class main public static void main string args throws exception object mapper mapper new object mapper mapper read value some object that can aggregated class mapper read value some object that can aggregated class mapper read value key null some object that can aggregated class mapper read value some object that can aggregated class class some object that can aggregated json creator public some object that can aggregated object obj system out println obj obj get class output class java util array list class java util array list key null class java util linked hash map exception thread main com fasterxml jackson databind json mapping exception can not deserialize instance java lang object out end object token source line column the text was updated successfully but these errors were encountered copy link member cowtowncoder commented oct 2015 with jackson some other version copy link author pyanoveugen commented oct 2015 updated the first message with link source yes using copy link member cowtowncoder commented oct 2015 thanks have look copy link author pyanoveugen commented oct 2015 someone need hot fix currently found this solution but little complicated with extra custom deserializator import java exception import com fasterxml jackson annotation json ignore import com fasterxml jackson annotation json value import com fasterxml jackson core json parser import com fasterxml jackson databind deserialization context import com fasterxml jackson databind json deserializer import com fasterxml jackson databind object mapper import com fasterxml jackson databind annotation json deserialize public class main public static void main string args throws exception object mapper mapper new object mapper mapper read value some object that can aggregated class mapper read value some object that can aggregated class mapper read value key null some object that can aggregated class mapper read value some object that can aggregated class json deserialize using deserializer class class some object that can aggregated json ignore private object data json creator using custom deserialization instead com fasterxml jackson databind deser std untyped object deserializer public some object that can aggregated object obj this data obj system out println obj obj get class json value public object get data return data class deserializer extends json deserializer override public some object that can aggregated deserialize json parser deserialization context ctxt throws exception object data read value object class return new some object that can aggregated data copy link member cowtowncoder commented oct 2015 hmmh this sounds quite familiar actually like 941 copy link author pyanoveugen commented oct 2015 yes look like the same but object node expects just some object structure and doesn accept any array just text value copy link member cowtowncoder commented oct 2015 what meant that the underlying problem the same due buffering needed json creator token seen delegate deserializer does not have current token json token start object json token field name this needs special handling deserializers that handle json objects and that was missing from json node deserializer was fixed but now needs similar fix for untyped deserializer cowtowncoder added this the milestone oct 2015 cowtowncoder closed this 25f oct 2015 cowtowncoder modified the milestones oct 2015 copy link member cowtowncoder commented oct 2015 thank you for reporting this just fixed will included copy link author pyanoveugen commented oct 2015 cowtowncoder thank you too copy link sgmiller commented dec 2015 believe still having this issue though with the smile factory copy link author pyanoveugen commented dec 2015 sgmiller resolved copy link sgmiller commented dec 2015 not for even but may different case let find stack trace com fasterxml jackson core json parse exception invalid type marker byte 0xfa for expected field name end object marker source file var lib tomcat webapps root web inf classes layout data layouts smile line column 3700060 com fasterxml jackson core json parser construct error json parser java 1581 com fasterxml jackson core base parser minimal base report error parser minimal base java 533 com fasterxml jackson dataformat smile smile parser handle field name smile parser java 1571 com fasterxml jackson dataformat smile smile parser next token smile parser java 587 com fasterxml jackson databind deser std map deserializer read and bind string map map deserializer java 484 com fasterxml jackson databind deser std map deserializer deserialize map deserializer java 341 com fasterxml jackson databind deser std map deserializer deserialize map deserializer java com fasterxml jackson databind object mapper read map and close object mapper java 3736 com fasterxml jackson databind object mapper read value object mapper java 2698 copy link sgmiller commented dec 2015 fwiw the same file loads fine large generic map string object copy link author pyanoveugen commented dec 2015 not developer these projects but you have problem with another library jackson dataformat smile guess related wrong encoding that library source copy link sgmiller commented dec 2015 thanks file issue there sign for free join this conversation git hub already have account sign comment assignees one assigned labels none yet projects none yet milestone linked pull requests successfully merging pull request may close this issue none yet participants</description>
</buginformation>
<fixedfiles>
<file>com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializer</file>
</fixedfiles>
</bug>
</bugrepository>
