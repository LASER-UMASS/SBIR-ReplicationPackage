<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="Jsoup_84" link="https://github.com/jhy/jsoup/issues/848">
<buginformation>
<summary>dom  helper  fails  convert  whenever  some  namespace  declarations  are  missing</summary>
<description>edited hello been running into issue where convert jsoup parsed document into org dom document with the dom helper and that document happens missing namespace declarations get the following exception namespace err attempt made create change object way which incorrect with regard namespaces looked into this bit and first thing tried was using locally forked version the dom helper that simply turned this flag off factory set namespace aware false however the issue continued instead simply hacked the code completely ignore namespaces csueiras purposely remove any namespace because get malformed html that might not declaring all namespaces element doc create element source tag name not completely sure this will have any side effects but resolved the issues with the document interacting with would glad provide pull request have some guidance regarding how properly handle this issue can handled jsoup the document having issues simply making use the facebook like buttons using tags like this like but there namespace declaration for the text was updated successfully but these errors were encountered csueiras changed the title cdom fails convert whenever some namespace declarations are missing dom helper fails convert whenever some namespace declarations are missing mar 2017 copy link contributor cketti commented mar 2017 the spec says the dom the html syntax and the xml syntax cannot all represent the same content for example namespaces cannot represented using the html syntax but they are supported the dom and the xml syntax also contains this note the html syntax namespace prefixes and namespace declarations not have the same effect xml for instance the colon has special meaning html element names html doesn support namespaces the part the local name guess the problem that jsoup element isn properly namespace aware the dom class treats everything before the first the tag name namespace prefix that wrong for elements created the html parser copy link author csueiras commented mar 2017 see you have any recommendations how this should handled modification working just fine for current problem but not sure this has unintended consequences copy link contributor cketti commented mar 2017 edited believe the right approach make jsoup element namespace prefix aware the dom element type for example has the attributes namespace uri prefix and local name using similar approach the jsoup parsers could correctly populate the prefix field html always null xml populate with namespace prefix and dom could use that field instead trying extract the namespace prefix from the tag name but have note that have neither read all jsoup code nor the complete html specification don know what wider implications change like this could have you only use the html parser and never explicitly create element with namespace think your change dom fine copy link owner jhy commented jun 2017 mmm don think really helpful the effort complexity making the html parser and element namespace aware think could probably just update the dom convertor check see there namespace defined and not set the namespace empty creation copy link freezystem commented jan 2018 encountered the same issue parsing whatever markups and interested solving this annoying issue there any ongoing fix this use case jhy added the bug label apr 2018 jhy closed this 810d apr 2018 jhy added this the milestone apr 2018 copy link owner jhy commented apr 2018 thanks fixed copy link micheladennis commented jun 2018 have the same issue using jsoup version parsing existing html that unable modify stack trace namespace err attempt made create change object way which incorrect with regard namespaces org dom dom exception com sun org apache xerces internal dom element impl set name element impl java 153 com sun org apache xerces internal dom element impl element impl java com sun org apache xerces internal dom core document impl create element core document impl java 2121 org jsoup helper dom builder head dom java org jsoup select node traversor traverse node traversor java org jsoup helper dom convert dom java org jsoup helper dom from jsoup dom java edu usc irds sparkler plugin amp converter parser parse metadata amp converter parser java edu usc irds sparkler plugin amp converter parser test test add amp converter parser test java sun reflect native method accessor impl invoke native method sun reflect native method accessor impl invoke native method accessor impl java sun reflect delegating method accessor impl invoke delegating method accessor impl java java lang reflect method invoke method java 498 org junit runners model framework method run reflective call framework method java org junit internal runners model reflective callable run reflective callable java org junit runners model framework method invoke explosively framework method java org junit internal runners statements invoke method evaluate invoke method java org junit runners parent runner run leaf parent runner java 325 org junit runners block unit class runner run child block unit class runner java org junit runners block unit class runner run child block unit class runner java org junit runners parent runner run parent runner java 290 org junit runners parent runner schedule parent runner java org junit runners parent runner run children parent runner java 288 org junit runners parent runner access 000 parent runner java org junit runners parent runner evaluate parent runner java 268 org junit runners parent runner run parent runner java 363 org apache maven surefire junit unit test set execute unit test set java org apache maven surefire junit unit provider execute test set unit provider java 123 org apache maven surefire junit unit provider invoke unit provider java 104 sun reflect native method accessor impl invoke native method sun reflect native method accessor impl invoke native method accessor impl java sun reflect delegating method accessor impl invoke delegating method accessor impl java java lang reflect method invoke method java 498 org apache maven surefire util reflection utils invoke method with array reflection utils java 164 org apache maven surefire booter provider factory provider proxy invoke provider factory java 110 org apache maven surefire booter surefire starter invoke provider surefire starter java 175 org apache maven surefire booter surefire starter run suites process when forked surefire starter java 107 org apache maven surefire booter forked booter main forked booter java copy link freezystem commented jun 2018 micheladennis the fix seems shipped with version and higher can you please update and retry copy link micheladennis commented jun 2018 maven repository seems only have copy link panthony commented jul 2018 freezystem encountering the same issue but were unable found the release really deployed copy link freezystem commented jul 2018 actually also stuck with this issue and there version yet but there milestone for don know when this version will released but hope will soon possible sign for free join this conversation git hub already have account sign comment assignees one assigned labels bug projects none yet milestone linked pull requests successfully merging pull request may close this issue none yet participants</description>
</buginformation>
<fixedfiles>
<file>org.jsoup.helper.W3CDom</file>
</fixedfiles>
</bug>
</bugrepository>
