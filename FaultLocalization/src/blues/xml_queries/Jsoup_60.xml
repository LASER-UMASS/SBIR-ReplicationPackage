<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="Jsoup_60" link="https://github.com/jhy/jsoup/issues/803">
<buginformation>
<summary>failed  test  while  passed  for  contains  query</summary>
<description>edited ghost today tried upgrade jsoup from however one unit test failed like this div row spacing medium span size base contains ship pay div row spacing medium span size base contains send pay div row spacing medium span color price contains varies above are css selectors and webpage that such element exists jsoup selector find elements which broke unit test seems like that the contains logic broke not sure whether processing changed newer version can you have look this for your reference attached the html page zip file amazon return zip the text was updated successfully but these errors were encountered copy link owner jhy commented jan 2017 the html you sent doesn contain any those strings send pay varies none those selectors could match maybe the output format changed can you check and verify please copy link author ghost commented jan 2017 edited ghost jonathan thank you for your reply this issue reported sorry for don express the issue clearly yes the html doesn contain any those strings but the behavior actually not this yes the expected result that cannot find any result matching selectors listed above however the actual result that jsoup find copied the html source https try jsoup org and input any selector the div row spacing medium span size base contains send pay find elements incorrect div row spacing medium span size base contains ship pay find elements incorrect div row spacing medium span color price contains varies find elements correct just used save feature this site for your reference http try jsoup org one unit test dependent the correct result that element should find any these selectors correct yet will fail this test just verified again when change jsoup version pom xml unit test passes when change failed this issue also exists just tested copy link owner jhy commented jan 2017 got looks like the quote elimination path the contains borking this case btw you can save try jsoup and share links would save having attach files etc see http try jsoup org uxm vvc 3yg copy link owner jhy commented jan 2017 this coming from the change for 611 needs check quote start copy link author ghost commented jan 2017 jonathan when check other issues found the save feature updated comments and add the url this try jsoup site awesome would use development for quick verify and testing the future thank you for providing such great tool plus your great library that use since versions nearly all personal projects copy link owner jhy commented jan 2017 not sure this going reconcilable with 611 may that you have unbalanced quote you need escape and the change jsoup will throw exception there content left the selector that unused give some examples jhy closed this 8fecf jan 2017 copy link owner jhy commented jan 2017 thanks for the feedback because using quotes contains and attribute matching can make contains text text work the solution for you looking for quote will escape that quote like contains text text and remember double escape source code once for java once for the css just like regex see the committed test case make more obvious what going wrong unbalanced quote parentheses found jsoup now throws exception hope this helps copy link sarwar 990 commented dec 2020 803 sign for free join this conversation git hub already have account sign comment assignees one assigned labels none yet projects none yet milestone milestone linked pull requests successfully merging pull request may close this issue none yet participants</description>
</buginformation>
<fixedfiles>
<file>org.jsoup.parser.TokenQueue</file>
<file>org.jsoup.select.QueryParser</file>
</fixedfiles>
</bug>
</bugrepository>
