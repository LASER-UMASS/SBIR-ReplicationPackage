<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="JacksonDatabind_82" link="https://github.com/FasterXML/jackson-databind/issues/1595">
<buginformation>
<summary>not  working  jackson</summary>
<description>json ignore properties value password ignore unknown true allow setters true public class json test private string username private string password public json test super todo auto generated constructor stub public json test string username string password super this username username this password password public string get username return username public void set username string username this username username public string get password return password public void set password string password this password password public static void main string args object mapper mapper new object mapper json test json new json test user password try system out println mapper write value string json catch json processing exception todo auto generated catch block print stack trace string json string username username password password try json mapper read value json string json test class system out println json get password catch exception todo auto generated catch block print stack trace the version the password cannot deserialize the output username user null the text was updated successfully but these errors were encountered copy link member cowtowncoder commented apr 2017 edited can not reproduce the issue with but maybe don understand what the problem test should check for values printing json out doesn necessarily help much all can see output being printed expected one possibility that fix for 1345 1575 both included could maybe have resolved this issue copy link author anywnyu commented apr 2017 string json string username username password password try json mapper read value json string json test class system out println json get password catch exception todo auto generated catch block print stack trace expect the output password but null 当allow setters 为true 我认为应该是可以从 string 中反序列化的 但是这里可以看到没有从 string 中读取到password copy link member cowtowncoder commented apr 2017 anywnyu what was saying was that this not what see with version password seems correctly deserialized possible you may running this against earlier version copy link author anywnyu commented apr 2017 cowtowncoder version password can not deserialized and the output null copy link member cowtowncoder commented apr 2017 anywnyu this can not reproduce this without functioning unit test there nothing can will closing the issue soon copy link author anywnyu commented apr 2017 edited cowtowncoder don know what functioning unit test you need could you tell what the output with the follow code please expect the output password but null the version json ignore properties value password allow setters true public class json test private string username private string password public json test super public string get username return username public void set username string username this username username public string get password return password public void set password string password this password password public static void main string args object mapper mapper new object mapper string json string username username password password try json test json mapper read value json string json test class system out println json get password catch exception todo auto generated catch block print stack trace 我使用的是2 8版本 这个例子中 我希望能从字符串中反序列化password 运行结果输出 password 没有能从字符串中反序列化password 输出的结果也是 null 我debug 发现下面的代码并未区分allow setters 是否为true json ignore properties 定义的字段都被忽略了 在循环处理的字段中没有包含password com fasterxml jackson databind deser bean deserializer factory add bean props deserialization context bean description bean deserializer builder line 459 line 466 ignorals null boolean ignore any ignorals get ignore unknown builder set ignore unknown properties ignore any explicit implicit definitions ignored ignorals get ignored for string prop name ignored builder add ignorable prop name else ignored collections empty set com fasterxml jackson databind deser bean deserializer factory filter bean props deserialization context bean description bean deserializer builder list set line 603 copy link member cowtowncoder commented apr 2017 anywnyu not going spend any time running various things except for one specific thing failing unit test that class that has unit test case and one that fails that provided please open cowtowncoder closed this apr 2017 copy link runjia 1987 commented apr 2017 the issue exsits allow setters true not working since increased from you should spend more time about how run test copy link author anywnyu commented apr 2017 runjia 1987 我的英文不怎么样 没看太明白 你能否提供给 cowtowncoder 一个能跑的test case copy link runjia 1987 commented apr 2017 anywnyu simple case below should surely reproduce this issue object class setter getter json ignore properties value name allow setters true public class simple private int private string name private string creator private string business test class test public void test deserialize throws exception object mapper mapper new object mapper simple config new simple config set 123 config set name jack config set creator god config set business cars string json mapper write value string config system out println json name not serialized expected string original 123 name jack creator god business cars simple des mapper read value original simple class system out println des get name name not deserialized expected build gradle compile com fasterxml jackson core jackson core compile com fasterxml jackson core jackson databind compile com fasterxml jackson core jackson annotations compile com fasterxml jackson jaxrs jackson jaxrs base compile com fasterxml jackson jaxrs jackson jaxrs json provider compile com fasterxml jackson datatype jackson datatype jsr 310 compile com fasterxml jackson core jackson core compile com fasterxml jackson core jackson databind compile com fasterxml jackson core jackson annotations compile com fasterxml jackson jaxrs jackson jaxrs base compile com fasterxml jackson jaxrs jackson jaxrs json provider compile com fasterxml jackson datatype jackson datatype jsr 310 switch between the jackson versions gradle will see the behaves wrong copy link member cowtowncoder commented apr 2017 runjia 1987 almost unit test all that lacks are assertions printing values out not test but can add that however what are setter and getter annotations this using something like lombok would also need expanded class actual class used runtime copy link runjia 1987 commented may 2017 cowtowncoder lombok and you may replace the annotations with ide generated getter setter methods eclipse idea deserialization output the same expect name field deserialized but not json ignore properties value name allow setters true public class simple private int private string name private string creator private string business public int get return public void set int this public string get name return name public void set name string name this name name public string get creator return creator public void set creator string creator this creator creator public string get business return business public void set business string business this business business copy link member cowtowncoder commented may 2017 runjia 1987 thank you lombok depedency specifically not accepted for jackson unit tests due not working solely via maven requires add installation and definition stand alone test that code works this point test seems almost complete hope find time look into this some point cowtowncoder reopened this may 2017 cowtowncoder added commit that referenced this issue may 2017 add test for 1595 for does not fail this regres loading status checks 86c 43de sion cowtowncoder added this the milestone may 2017 cowtowncoder changed the title json ignore properties allow setters not working json ignore properties allow setters not working jackson may 2017 cowtowncoder closed this 1ae may 2017 copy link member cowtowncoder commented may 2017 anywnyu runjia 1987 thank you for reporting this looks like was regression from due refactoring annotation handling fix will patch release tadschik pushed commit adorsys multibanking that referenced this issue may 2017 changed jackson datatype version 699f faster xml jackson databind 1595 sign for free join this conversation git hub already have account sign comment assignees one assigned labels none yet projects none yet milestone linked pull requests successfully merging pull request may close this issue none yet participants</description>
</buginformation>
<fixedfiles>
<file>com.fasterxml.jackson.databind.deser.BeanDeserializerFactory</file>
</fixedfiles>
</bug>
</bugrepository>
