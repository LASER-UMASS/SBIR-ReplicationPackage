<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="JacksonCore_11" link="https://github.com/FasterXML/jackson-core/issues/216">
<buginformation>
<summary>array index out bounds exception  128  when  repeatedly  serializing  byte  array</summary>
<description>java lang array index out bounds exception 128 com fasterxml jackson core sym byte quads canonicalizer add name byte quads canonicalizer java 853 com fasterxml jackson core json utf stream json parser add name utf stream json parser java 2340 com fasterxml jackson core json utf stream json parser find name utf stream json parser java 2224 com fasterxml jackson core json utf stream json parser parse long name utf stream json parser java 1831 com fasterxml jackson core json utf stream json parser parse medium name utf stream json parser java 1786 com fasterxml jackson core json utf stream json parser parse medium name utf stream json parser java 1743 com fasterxml jackson core json utf stream json parser parse name utf stream json parser java 1678 com fasterxml jackson core json utf stream json parser next field name utf stream json parser java 1007 com fasterxml jackson databind deser std map deserializer read and bind string map map deserializer java 471 com fasterxml jackson databind deser std map deserializer deserialize map deserializer java 341 com fasterxml jackson databind deser std map deserializer deserialize map deserializer java com fasterxml jackson databind object mapper read map and close object mapper java 3702 com fasterxml jackson databind object mapper read value object mapper java 2824 com kryptnostic services smoke tests spam add index pair smoke tests java 605 sun reflect native method accessor impl invoke native method sun reflect native method accessor impl invoke native method accessor impl java sun reflect delegating method accessor impl invoke delegating method accessor impl java java lang reflect method invoke method java 497 org junit runners model framework method run reflective call framework method java org junit internal runners model reflective callable run reflective callable java org junit runners model framework method invoke explosively framework method java org junit internal runners statements invoke method evaluate invoke method java org junit internal runners statements run befores evaluate run befores java org junit runners parent runner run leaf parent runner java 271 org junit runners block unit class runner run child block unit class runner java org junit runners block unit class runner run child block unit class runner java org junit runners parent runner run parent runner java 238 org junit runners parent runner schedule parent runner java org junit runners parent runner run children parent runner java 236 org junit runners parent runner access 000 parent runner java org junit runners parent runner evaluate parent runner java 229 org junit internal runners statements run befores evaluate run befores java org junit internal runners statements run afters evaluate run afters java org junit runners parent runner run parent runner java 309 org eclipse jdt internal junit runner unit test reference run unit test reference java org eclipse jdt internal junit runner test execution run test execution java org eclipse jdt internal junit runner remote test runner run tests remote test runner java 459 org eclipse jdt internal junit runner remote test runner run tests remote test runner java 675 org eclipse jdt internal junit runner remote test runner run remote test runner java 382 org eclipse jdt internal junit runner remote test runner main remote test runner java 192 repro test public void spam test object mapper mapper new object mapper map object user key server index pair ssip maps new concurrent map for int 10000 byte index pair bytes new byte 2080 new random next bytes index pair bytes server index pair sip new server index pair index pair bytes byte mapper write value bytes immutable map uuid random uuid string sip map string server index pair metadata mapper read value new type reference map string server index pair for entry string server index pair metadata entry metadata entry set server index pair index pair metadata entry get value ssip put new object user key metadata entry get key user index pair logger error iteration public class server index pair public static final string index pair field index pair private final byte index pair json creator public server index pair json property index pair field byte index pair preconditions check state index pair length 2080 index pair must 2080 bytes long this index pair index pair json property index pair field public byte get index pair return index pair public class object user key public static final string separator private final string object private final uuid user key json creator public object user key json property names field string object json property names user field uuid user key super this object object this user key user key json property names field public string get object return object json property names user field public uuid get user key return user key override public int hash code final int prime int result result prime result object null object hash code return result override public boolean equals object obj this obj return true obj null return false obj instanceof object user key return false object user key other object user key obj object null other object null return false user key null other user key null return false object equals other object return false user key equals other user key return false return true override public string string return user key separator object public static object user key from string string value int index value last index object user key separator preconditions check state index separator character separator should present for object user key string user key string value substring index string object string value substring index uuid user key uuid from string user key string return new object user key object string user key public byte bytes return this string get bytes the text was updated successfully but these errors were encountered copy link makosblade commented sep 2015 upvote copy link unsung hero commented sep 2015 copy link member cowtowncoder commented sep 2015 suspect this same continuation 207 being worked nasty one obviously will link that issue back this one cowtowncoder mentioned this issue sep 2015 array index out bounds exception com fasterxml jackson core sym byte quads canonicalizer 207 closed cowtowncoder added commit that referenced this issue sep 2015 add failing test for 216 and 207 7ca cowtowncoder modified the milestones sep 2015 cowtowncoder closed this 43867 sep 2015 copy link member cowtowncoder commented sep 2015 the underlying problem same what was left over from 207 there were two unrelated problems but further reports were added the issue used modified test case from that bug avoid dependency object mapper but confident this fixes the root cause fix will part released relatively soon will just need over list all bugs submitted during past couple weeks bundle all critical fixes copy link makosblade commented sep 2015 thanks sure test out copy link simonbasle commented sep 2015 cowtowncoder pending fix version there any workaround for this disable the byte quads canonicalizer copy link member cowtowncoder commented sep 2015 simonbasle yes disable json factory feature canonicalize field names that will avoid canonicalization codereview pushed commit couchbase couchbase jvm core that referenced this issue sep 2015 jvmcbc 242 bump jackson 9eb 79e motivation bug jackson has been identified when decoding documents introduced previous versions are not affected seems now modifications update jackson which includes the fix faster xml jackson core 216 result decoding issue fixed change 1bfec 9afc 329d 633bcd 630804aba 7ce 527 reviewed http review couchbase org 55391 tested michael nitschinger michael nitschinger couchbase com reviewed simon basl simon couchbase com this was referenced dec 2015 array index out bounds exception com fasterxml jackson core sym byte quads canonicalizer guyboertje jrjackson closed json decoding issues starting with version java java lang array index out bounds exception elastic logstash 4316 closed gianm mentioned this issue may 2016 update jackson metamx scala util merged slim mentioned this issue sep 2017 sometimes hit this java lang array index out bounds exception apache druid 4741 closed sign for free join this conversation git hub already have account sign comment assignees one assigned labels none yet projects none yet milestone linked pull requests successfully merging pull request may close this issue none yet participants</description>
</buginformation>
<fixedfiles>
<file>com.fasterxml.jackson.core.sym.ByteQuadsCanonicalizer</file>
</fixedfiles>
</bug>
</bugrepository>
