<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="JacksonCore_12" link="https://github.com/FasterXML/jackson-core/issues/37">
<buginformation>
<summary>json parser get token location  doesn  update  after  field  names</summary>
<description>there unit test repro the issue below basically when you field name token you call get token location and then next token and then get token location again you get the same location for both calls get token location even though you advanced new token the issue seems the next token logic reader based json parser and utf stream json parser when calling next token field name calls next after name which updates curr token but doesn update token input row and token input col for the new token location started try fix but the next token logic spread across much code that looked like pretty major surgery not something willing this point public void test token location after field name throws exception test token location after field name false test token location after field name true private void test token location after field name boolean use stream throws exception final string doc name 123 json factory new json factory json parser use stream create json parser new byte array input stream doc get bytes utf create json parser new string reader doc assert equals json token start object next token assert equals json token field name next token assert equals json token value number int next token assert equals get token location get line assert equals get token location get column close the text was updated successfully but these errors were encountered copy link member cowtowncoder commented nov 2012 yes this must regression due earlier rewrite that combines parsing field names with minimal tokenization the following value this was done for performance reasons but did not consider effects for token location handling copy link member cowtowncoder commented nov 2012 and earlier mean something like quite while ago copy link aborg commented mar 2015 gets worse when the values are not the first object for example book year 1999 title title author author this case for title the get token location and the get current location select both for the field name and the string value the following text author please recognize value selected this time and the previous also selected similar behaviour for the author this with version copy link member cowtowncoder commented mar 2015 this with byte char backed source both copy link aborg commented mar 2015 cowtowncoder have just tested with the byte backed source new json factory create parser json get bytes utf just tested with the char based backend and seems work the same way copy link member cowtowncoder commented mar 2015 aborg makes sense but just wanted verify cowtowncoder mentioned this issue jun 2015 invalid format exception reports wrong location faster xml jackson databind 502 closed complexmath added commit complexmath jackson core that referenced this issue nov 2015 fixed issue faster xml 9ac complexmath mentioned this issue nov 2015 fixed issue 227 closed copy link complexmath commented nov 2015 please see attached pull request for fix latkin mentioned this issue nov 2015 array element and field token spans include previous comma 229 closed cowtowncoder added commit that referenced this issue nov 2015 add failing tests for 229 loading status checks 2bb 14b cowtowncoder added this the milestone nov 2015 cowtowncoder closed this fede nov 2015 sign for free join this conversation git hub already have account sign comment assignees one assigned labels none yet projects none yet milestone linked pull requests successfully merging pull request may close this issue none yet participants</description>
</buginformation>
<fixedfiles>
<file>com.fasterxml.jackson.core.json.ReaderBasedJsonParser</file>
<file>com.fasterxml.jackson.core.json.UTF8StreamJsonParser</file>
</fixedfiles>
</bug>
</bugrepository>
