<?xml version="1.0" encoding="ISO-8859-1"?>
<bugrepository name="Defects4J">
<bug id="JacksonDatabind_15" link="https://github.com/FasterXML/jackson-databind/issues/731">
<buginformation>
<summary>xml adapter  result  marshaling  error  case value type  object</summary>
<description>have error com fasterxml jackson databind json mapping exception serializer found for class java lang string and properties discovered create bean serializer case using custom xml adapter with such declaration public static class integer list xml adapter extends xml adapter object list integer override public object marshal list integer list throws exception return joiner join list change declaration this class extends xml adapter string list works good full example public class integer list xml adapter test test public void test basic throws json processing exception object mapper mapper new object mapper set annotation introspector new jaxb annotation introspector some int list holder list holder new some int list holder list holder set list one list system out println mapper write value string list holder public static class integer list xml adapter extends xml adapter object list integer override public list integer unmarshal object value throws exception return null override public object marshal list integer list throws exception return joiner join list public static class integer list string xml adapter extends xml adapter string list integer public list integer unmarshal string value throws exception return null public string marshal list integer list throws exception return joiner join list xml root element xml accessor type xml access type none public static class some int list holder xml attribute xml java type adapter integer list xml adapter class private list integer list one public list integer get list one return list one public void set list one list integer list one this list one list one this state with last jackson version will get error com fasterxml jackson databind json mapping exception serializer found for class java lang string and properties discovered create bean serializer avoid exception disable serialization feature fail empty beans through reference chain some int list holder list one com fasterxml jackson databind ser impl unknown serializer fail for empty unknown serializer java com fasterxml jackson databind ser impl unknown serializer serialize unknown serializer java com fasterxml jackson databind ser std std delegating serializer serialize std delegating serializer java 157 com fasterxml jackson databind ser bean property writer serialize field bean property writer java 575 com fasterxml jackson databind ser std bean serializer base serialize fields bean serializer base java 663 com fasterxml jackson databind ser bean serializer serialize bean serializer java 156 com fasterxml jackson databind ser default serializer provider serialize value default serializer provider java 129 com fasterxml jackson databind object mapper config and write value object mapper java 3385 com fasterxml jackson databind object mapper write value string object mapper java 2779 but change xml java type adapter integer list string xml adapter error will fixed and code will work fine this error exists only jackson have this code with object generic jackson and get issue only during migration new major version this concrete error can fixed hack com fasterxml jackson databind ser std std delegating serializer override public void serialize object value json generator gen serializer provider provider throws exception object delegate value convert value value should accept nulls delegate value null provider default serialize null gen return original code delegate serializer serialize delegate value gen provider json serializer object delegate serializer delegate serializer instanceof unknown serializer delegate serializer provider find value serializer delegate value get class else delegate serializer delegate serializer delegate serializer serialize delegate value gen provider you can find test class here https github com spikhalskiy jackson xmladapter bug blob master src test java integer list xml adapter test java and hacked serializer code here https github com spikhalskiy jackson xmladapter bug blob master src main java com fasterxml jackson databind ser std std delegating serializer java now test passing this repo because fake std delegating serializer classpath try delete get issue the text was updated successfully but these errors were encountered spikhalskiy changed the title xml adapter error case value type object xml adapter result marshaling error case value type object mar 2015 spikhalskiy added commit spikhalskiy jackson databind that referenced this issue mar 2015 fix issue faster xml 731 returning object from converter 80cf spikhalskiy mentioned this issue mar 2015 fix issue 731 returning object from converter 732 closed copy link member cowtowncoder commented mar 2015 sounds like bug there are some issues with handling xml adapter but hope this one something easier handle copy link contributor author spikhalskiy commented mar 2015 cowtowncoder not issue with xml adapter only wrote unit test for native converter and get the same result you can find research and possible fix 732 copy link member cowtowncoder commented apr 2015 only now fully understood the issue right dynamic meaning that since type not specified anything more than java lang object converter can not access yet was able use the provided test which great and think can use the pull request big thanks for providing that the starting point may choose slightly different route for tackling but the basic idea sound and like copy link contributor author spikhalskiy commented apr 2015 cowtowncoder thanks lot for your update are really waiting fix for this issue because our migrating major version has been stuck and don want produce own forks builds cowtowncoder added this the milestone apr 2015 cowtowncoder closed this 119ddc apr 2015 copy link member cowtowncoder commented apr 2015 problem this will the meantime perhaps you can try snapshot build locally unfortunately just released recently may take couple weeks but the fix any rate copy link contributor author spikhalskiy commented apr 2015 cowtowncoder sure will make snapshot build don want produce own forks builds mean don want create forks with our own fixes not included main repo and that will need adopt for future versions make temporary build not issue thanks cowtowncoder mentioned this issue apr 2015 problem with xml adapter downcasting faster xml jackson module jaxb annotations closed sign for free join this conversation git hub already have account sign comment assignees one assigned labels none yet projects none yet milestone linked pull requests successfully merging pull request may close this issue none yet participants</description>
</buginformation>
<fixedfiles>
<file>com.fasterxml.jackson.databind.JavaType</file>
<file>com.fasterxml.jackson.databind.ser.BeanSerializerFactory</file>
<file>com.fasterxml.jackson.databind.ser.std.BeanSerializerBase</file>
<file>com.fasterxml.jackson.databind.ser.std.StdDelegatingSerializer</file>
<file>com.fasterxml.jackson.databind.ser.std.StdSerializer</file>
</fixedfiles>
</bug>
</bugrepository>
